function getUrlVars() {
    for (var e, a = [], t = window.location.href.slice(window.location.href.indexOf("?") + 1, 0 <= window.location.href.indexOf("#") ? window.location.href.indexOf("#") : void 0).split("&"), r = 0; r < t.length; r++) e = t[r].split("="), a.push(e[0]), a[e[0]] = decodeURIComponent(e[1]);
    return a
}

function getUrlAnchor() {
    return 0 <= window.location.href.indexOf("#") ? window.location.href.slice(window.location.href.indexOf("#") + 1) : ""
}

function playVideo() {
    var e = $(".video iframe").attr("src");
    $(".video iframe").attr("src", e + "&amp;autoplay=1")
}

function checkVideoAutoPlay() {
    "video" == getUrlAnchor() && playVideo()
}

function saveSource() {
    var e = getUrlVars();
    e.utm_source && ($.cookie("utm_source", e.utm_source, {
        expires: 30,
        path: "/"
    }), $.removeCookie("utm_medium", {
        path: "/"
    }), $.removeCookie("utm_campaign", {
        path: "/"
    }), $.removeCookie("utm_term", {
        path: "/"
    }), $.removeCookie("utm_content", {
        path: "/"
    })), e.utm_campaign && $.cookie("utm_campaign", e.utm_campaign, {
        expires: 30,
        path: "/"
    }), e.utm_medium && $.cookie("utm_medium", e.utm_medium, {
        expires: 30,
        path: "/"
    }), e.utm_term && $.cookie("utm_term", e.utm_term, {
        expires: 30,
        path: "/"
    }), e.utm_content && $.cookie("utm_content", e.utm_content, {
        expires: 30,
        path: "/"
    });
    try {
        void 0 === $.cookie("first_referrer") && $.cookie("first_referrer", document.referrer, {
            expires: 30,
            path: "/"
        })
    } catch (e) {}
}

function isValidEmail(e) {
    return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)
}

function isValidPhone(e) {
    return e && 1 < e.length
}

function resizeModal(e, a) {
    void 0 === a && (a = null);
    var t = .9 * $(window).width();
    a || (e || $("#modal_form").css("max-width", "none"), "none" != $("#modal_form").css("max-width") && (a = parseInt($("#modal_form").css("max-width")))), a && ($("#modal_form").css("max-width", a), t = Math.min(t, a)), $("#modal_form").css("width", t), e && $("#modal_form").css("top", window.pageYOffset + 30 + "px")
}

function showModal(e, a) {
    void 0 === a && (a = null), $("#modal_content").html(e), resizeModal(null, a), $("#overlay").fadeIn(400, function() {
        $("#modal_form").css("display", "block").animate({
            opacity: 1,
            top: window.pageYOffset + 30 + "px"
        }, 200)
    }), $(".modal-wrapper").fadeToggle(500)
}

function showVideo(e) {
    var a = $(e),
        t = a.data("title"),
        r = a.data("youtube-id"),
        o = a.data("youtube-list"),
        n = "https://www.youtube.com/embed/" + r + "?rel=0&controls=1&showinfo=0&autoplay=1";
    o && (n = n + "&loop=1&listType=playlist&list=" + o);
    var i = '<div class="col-sm-12"><div class="section-header text-center">';
    i += "<h2>" + t + "</h2>", i += "</div></div>", showModal(i += '<div class="col-sm-12"><div class="video modal-clear"><iframe width="560" height="315" src="' + n + '" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div></div>', 770), $("#modal_content .video").fitVids()
}

function profileObjectCheck() {
    o_types = {
        "квартира": "flat",
        "комната": "room",
        "дом": "house",
        "земельный участок": "land",
        "дача": "dacha",
        "гараж": "garage",
        "торговое/офисное помещение": "office",
        "др. коммерческая недвижимость": "commercial",
        "легковой автомобиль": "car",
        "грузовой автомобиль": "truck",
        "плавсредство": "ship",
        "спецтехника": "spec",
        "автобус": "bus",
        "мототехника": "moto"
    };
    var e = $("#f6441").val();
    if ($(".f-o").hide(), "недвижимость" == e) {
        $("#f6461").parents(".field-group").hide(), $("#f6451").parents(".field-group").show(), $("#f6431").parents(".field-group").show();
        var a = o_types[$("#f6451").val()];
        $(".f-o.f-real-estate").show(), 0 <= $.inArray(a, ["flat", "room", "house"]) && $(".f-o.f-living").show(), $(".f-o.f-" + a).show()
    } else if ("транспорт" == e) {
        $("#f6451").parents(".field-group").hide(), $("#f6461").parents(".field-group").show(), $("#f6431").parents(".field-group").hide();
        var t = o_types[$("#f6461").val()];
        $(".f-o.f-transport").show(), $(".f-o.f-" + t).show()
    } else $("#f6461").parents(".field-group").hide(), $("#f6451").parents(".field-group").hide()
}

function loanIsOwner() {
    $("#f7151").prop("checked") ? $(".f-owner").hide() : $(".f-owner").show()
}

function saveProfile(t) {
    var r = $("#profile"),
        e = $(".field-value", r);
    if (data = {}, e.each(function(e, a) {
            ("checkbox" != $(a).prop("type") || $(a).prop("checked")) && (data[$(a).prop("name")] = $(a).val())
        }), data.lead_hash = $.cookie("lead_hash"), !data.lead_hash) return alert("Сначала отправьте заявку!"), !1;
    if (0 < $(".app-form").length) var a = "https://app.creditors24.com/front/site/profile?step=" + t;
    else a = "https://kreditor.clientbase.ru/add.php?from=site-profile&step=" + t;
    $.ajax({
        type: "POST",
        url: a,
        data: data,
        beforeSend: function() {
            var e = $(".step" + t + " button.form-button.next", r);
            $("span.fa", e).addClass("fa-spinner fa-spin").removeClass("fa-sign-in").removeClass("fa-caret-right"), $("button.form-button", r).prop("disabled", !0)
        },
        success: function() {
            var e = $(".step" + t + " button.form-button.next", r),
                a = e.data("next");
            $(".profile-step.step" + t, r).hide(), $(".profile-step.step" + a, r).fadeIn(500), $("html, body").scrollTo($("#profile").offset().top - 100, 500), $("button.form-button", r).prop("disabled", !1), 4 == t ? (trackGoal("PROFILE-END"), $.cookie("lead_step", "2", {
                expires: 1,
                path: "/"
            }), $(".fa.fa-spinner", e).addClass("fa-check").removeClass("fa-spinner fa-spin")) : (trackGoal("PROFILE-STEP" + a), $(".fa.fa-spinner", e).addClass("fa-caret-right").removeClass("fa-spinner fa-spin"))
        },
        error: function() {
            var e = $(".step" + t + " button.form-button.next", r);
            4 == t ? $(".fa.fa-spinner", e).addClass("fa-sign-in").removeClass("fa-spinner fa-spin") : $(".fa.fa-spinner", e).addClass("fa-caret-right").removeClass("fa-spinner fa-spin"), $("button.form-button", r).prop("disabled", !1), alert("При отправке возникла ошибка. Попробуйте еще раз.")
        }
    })
}

function notifyBase() {
    $("#profile");
    if (data = {}, data.lead_hash = $.cookie("lead_hash"), !data.lead_hash) return alert("Сначала отправьте заявку!"), !1;
    if (0 < $(".app-form").length) var e = "https://app.creditors24.com/front/site/docs";
    else e = "https://kreditor.clientbase.ru/add.php?from=site-docs";
    $.ajax({
        type: "POST",
        url: e,
        data: data
    })
}

function uploadProfileDocs() {
    var i = $("#profile"),
        e = $("#profile-docs", i)[0].files;
    if (0 == e.length) return !1;
    var t = ["jpeg", "jpg", "pdf"],
        r = ["image/jpeg", "image/jpg", "application/pdf"],
        o = [],
        n = "";
    if ($.each(e, function(e, a) {
            n = a.name.split(".")[a.name.split(".").length - 1].toLowerCase(), -1 == r.indexOf(a.type) ? o.push(a.name + " - недопустимый тип файла") : -1 == t.indexOf(n) && o.push(a.name + " - недопустимое расширение файла"), 20971520 < a.size && o.push(a.name + " - размер файла не должен превышать 20МБ")
        }), 0 < o.length) return alert("При загрузке файлов возникли ошибки:\r\n" + o.join("; \r\n")), !1;
    var l = new FormData;
    $.each(e, function(e, a) {
        l.append(e, a)
    }), $.ajax({
        url: "/docs/upload.php?uploadfiles",
        type: "POST",
        data: l,
        cache: !1,
        dataType: "json",
        processData: !1,
        contentType: !1,
        beforeSend: function() {
            var e = $(".step5 button.form-button.next", i);
            $(".fa.fa-upload", e).addClass("fa-spinner fa-spin").removeClass("fa-upload"), $(".form-button-text", e).html("Загрузка..."), $(".step5 button.form-button", i).prop("disabled", !0)
        },
        success: function(e, a, t) {
            var r = "",
                o = "";
            $.each(e, function(e, a) {
                0 == a.errors.length ? r += "<li>" + $("<div>").text(a.name).html() + "</li>" : ("" == o && (o += "При загрузке файлов возникли ошибки:\r\n"), o += a.name + ": " + a.errors.join(", ") + ";\r\n")
            }), "" != r && ($(".upload-list", i).append(r), trackGoal("PROFILE-DOCS"), "3" != $.cookie("lead_step") && ($(".uploaded-files", i).show(), $(".step5 button.form-button.finish", i).show(), $.cookie("lead_step", "3", {
                expires: 1,
                path: "/"
            }), notifyBase()));
            var n = $(".step5 button.form-button.next", i);
            $(".fa.fa-spinner", n).addClass("fa-check").removeClass("fa-spinner fa-spin"), $(".form-button-text", n).html("Загружено!"), setTimeout(function() {
                $(".fa.fa-check", n).addClass("fa-upload").removeClass("fa-check"), $(".form-button-text", n).html("Добавить")
            }, 2e3), $("#profile-docs").val("", i), $(".step5 button.form-button", i).prop("disabled", !1), "" != o && alert(o)
        },
        error: function(e, a, t) {
            console.log("ОШИБКИ AJAX запроса: " + a);
            var r = $(".step5 button.form-button.next", i);
            $(".fa.fa-spinner", r).addClass("fa-upload").removeClass("fa-spinner fa-spin"), $(".form-button-text", r).html("Загрузить"), $(".step5 button.form-button", i).prop("disabled", !1), $("#profile-docs").val("", i), alert("При загрузке возникла ошибка. Попробуйте еще раз.")
        }
    })
}

function profileNextStep() {
    var e = $(this).data("next"),
        a = $(this).data("current");
    if (a) {
        var t = $(".profile-step.step" + a + " .field-group.required-field:visible .field-value").filter(function() {
            return "checkbox" == $(this).prop("type") ? !$(this).prop("checked") : "" == $(this).val()
        });
        0 == t.length || e < a || 7 == e ? 2 <= e && e <= 5 && a < e ? saveProfile(a) : 6 == e ? uploadProfileDocs() : ($(".profile-step.step" + a).hide(), $(".profile-step.step" + e).show(), $("html, body").scrollTo($("#profile").offset().top - 100, 500), 7 == e ? (trackGoal("PROFILE-FINISH"), $.removeCookie("lead_hash", {
            path: "/"
        }), $.removeCookie("lead_step", {
            path: "/"
        })) : trackGoal("PROFILE-STEP" + e)) : (t.parents(".field-group").addClass("p-error"), $("html, body").scrollTo($(t[0]).offset().top - 150, 500))
    } else $(".profile-step.step" + e).show(), $("html, body").scrollTo($("#profile").offset().top - 100, 500);
    return !1
}

function profileFieldChanged() {
    $(this).parents(".field-group").removeClass("p-error")
}

function initProfileForm(t) {
    t || (t = 1);
    var e = $("#profile").data("url") || "/profile/get_form3/";
    $.ajax({
        type: "GET",
        url: e,
        success: function(e) {
            if ($("#profile").html(e), $("#profile .step" + t).show(), $(".profile .prev,.profile .next").click(profileNextStep), $("#f6441, #f6451, #f6461").change(profileObjectCheck), profileObjectCheck(), $("#f7151").click(loanIsOwner), loanIsOwner(), $(".profile .field-value").on("input change", profileFieldChanged), $.cookie("lead_hash")) {
                if (0 < $(".app-form").length) var a = "https://app.creditors24.com/front/site/profile/" + $.cookie("lead_hash") + "?from=site";
                else a = "https://kreditor.clientbase.ru/get_profile.php?from=site&hash=" + $.cookie("lead_hash");
                $.ajax({
                    url: a,
                    type: "GET",
                    dataType: "json",
                    jsonp: !1,
                    success: function(e, a, t) {
                        e.error || $.each(e, function(e, a) {
                            $("#" + e).val(a).change()
                        }), getUrlVars().lh && $("html, body").scrollTo($("#profile").offset().top - 100, 500)
                    }
                })
            }
        }
    })
}

function isIE() {
    return !!(0 < navigator.userAgent.indexOf("MSIE ") || navigator.userAgent.match(/Trident.*rv\:11\./))
}

function addSpaces(e) {
    x = (e += "").split("."), x1 = x[0], x2 = 1 < x.length ? "." + x[1] : "";
    for (var a = /(\d+)(\d{3})/; a.test(x1);) x1 = x1.replace(a, "$1 $2");
    return x1 + x2
}

function calcSumFromPriceAndFee(e) {
    var a = $("#calc_price_range").val() - $("#calc_fee_range").val();
    $("#calc_sum_range").val(a), calcSumRangeInput(e)
}

function calcPriceRangeInput(e) {
    var a = $("#calc_price_range").val();
    $("#calc_price").val(addSpaces(a) + " ₽");
    $("#calc_sum_range").attr("min");
    if (0 < $("#calc_min_fee").length) $("#calc_min_fee").val();
    calcFeeRangeInput(e)
}

function calcFeeRangeInput(e) {
    var a = $("#calc_fee_range").val();
    $("#calc_fee").val(addSpaces(a) + " ₽"), calcSumFromPriceAndFee(e)
}

function calcSumRangeInput(e) {
    var a = $("#calc_sum_range"),
        t = a.val();
    t < 3e4 || 1e5 < t && (t -= 3e4), $("#calc_sum").val(addSpaces(t) + " ₽");
    $("#calc_payment_type").val();
    if (!0 !== e && ($("#calc_payment_range").attr("step", 1), 0 == t ? (t = 1e3, a.attr("min", 1e3), a.attr("step", 1e3), a.val(t)) : t < 1e4 ? (a.attr("min", 3e4), a.attr("step", 1e3)) : t < 1e5 ? (a.attr("min", 3e4), a.attr("step", 1e4)) : t < 1e6 ? (a.attr("min", 3e4), a.attr("step", 5e4)) : t < 5e6 ? (a.attr("min", 3e4), a.attr("step", 1e5)) : 5e6 <= t && (a.attr("min", 3e4), a.attr("step", 2e5)), $("#calc_fee_range").attr("step", 5e4)), 0 < $("#calc_fee_range").length) {
        var r = $("#calc_price_range").val() - t;
        $("#calc_fee_range").val(r), $("#calc_fee").val(addSpaces(r) + " ₽")
    }
    calcResult(e)
}

function calcTermRangeInput() {
    var e = $("#calc_term_range"),
        a = e.val();
    0 == a ? (a = 1, e.attr("min", 1), e.val(a)) : a < 12 ? e.attr("min", 1) : a < 24 ? e.attr("min", 0) : 24 <= a && e.attr("min", 0), $("#calc_term").val(addSpaces(a) + " " + plural(a, "мес", "мес", "мес")), calcResult()
}

function plural(e, a, t, r) {
    return (e - e % 10) % 100 != 10 ? e % 10 == 1 ? a : 2 <= e % 10 && e % 10 <= 4 ? t : r : r
}

function calcRateRangeInput() {
    var e = $("#calc_rate_range").val();
    $("#calc_rate").val(addSpaces(e) + "%"), calcResult()
}

function calcPaymentRangeInput() {
    var e = $("#calc_payment_range");
    e.attr("step", 1e3), e.attr("min", 1e3 * Math.floor(e.attr("min") / 1e3)), e.attr("max", Math.ceil(e.attr("max") / 1e3 * 1e3) + 1);
    var a = e.val(),
        t = parseFloat($("#calc_term_range").val()),
        r = parseFloat($("#calc_rate_range").val() / 100),
        o = $("#calc_payment_type").val();
    if ("1" == o) var n = r + r / (Math.pow(1 + r, t) - 1),
        i = Math.round(a / n);
    else if (2 <= o) i = Math.round(a / r);
    $("#calc_sum_range").attr("step", 1), $("#calc_fee_range").attr("step", 1), $("#calc_sum_range").val(i), calcSumRangeInput(!0)
}

function calcResult(e) {
    var a = parseFloat($("#calc_sum_range").val()),
        t = $("#calc_sum_range").attr("min"),
        r = $("#calc_sum_range").attr("max"),
        o = parseFloat($("#calc_term_range").val()),
        n = ($("#calc_term_range").attr("min"), $("#calc_term_range").attr("max"), parseFloat($("#calc_rate_range").val() / 100)),
        i = ($("#calc_rate_range").attr("min"), $("#calc_rate_range").attr("max"), $("#calc_payment_type").val());
    if ("1" == i) {
        var l = getStv(!0),
            s = parseFloat($("#calc_term_range").val()),
            c = a * (s * l / 100),
            d = parseFloat(c) + parseInt(a),
            u = d / s;
        c = Math.ceil(100 * c) / 100, d = Math.ceil(100 * d) / 100, u = Math.ceil(100 * u) / 100;
        var p = (v = (h = (a * (n + n / (Math.pow(1 + n, o) - 1))).toFixed(2)) * o) - a,
            f = Math.round(t * (n + n / (Math.pow(1 + n, o) - 1))),
            m = Math.round(r * (n + n / (Math.pow(1 + n, o) - 1)))
    } else if ("2" == i) var h = (a * n).toFixed(2),
        v = (f = Math.round(t * n), m = Math.round(r * n), (p = h * o) + a);
    else if ("3" == i) h = (a * n).toFixed(2), f = Math.round(t * n), m = Math.round(r * n), v = (p = h * o) + a;
    else if ("4" == i) h = 0, f = 0, m = 0, v = (p = a * n * o) + a;
    else if ("5" == i) h = 0, f = 0, m = 0, p = (v = a * Math.pow(1 + n, o)) - a;
    (!0 !== e || $("#calc_payment_range").val() > m) && ($("#calc_payment_range").attr("min", f), $("#calc_payment_range").attr("max", m)), $("#calc_payment_range").val(h), $("#calc_payment").val(addSpaces(Math.round(h)) + " ₽"), $("#calc_payment_range").val(h), $("#calc_payments_sum").val(addSpaces(Math.round(v)) + " ₽"), $(".sum-v").html(addSpaces(Math.round(v)) + " ₽"), $("#calc_overpayment").val(addSpaces(Math.round(p)) + " ₽"), $(".sum-p").html(addSpaces(Math.round(p)) + " ₽"), $("#sumcr").val(addSpaces(a) + " ₽"), $("[name=sum-f]").val(addSpaces(a) + " ₽")
}

function getTotal() {
    var e = $("#calc_rate_range").val(),
        a = parseFloat($("#calc_term_range").val()),
        t = suma * (a * e / 100),
        r = parseFloat(t) + parseInt(suma),
        o = r / a;
    t = Math.ceil(100 * t) / 100, r = Math.ceil(100 * r) / 100, o = Math.ceil(100 * o) / 100, $("[name=procent]").inputmask({
        mask: getMask(t),
        greedy: !1,
        placeholder: "",
        numericInput: !0
    }), $("[name=sum]").inputmask({
        mask: getMask(r),
        greedy: !1,
        placeholder: "",
        numericInput: !0
    }), $("[name=payment]").inputmask({
        mask: getMask(o),
        greedy: !1,
        placeholder: "",
        numericInput: !0
    }), $("[name=sumcr],[name=sum-f]").inputmask({
        mask: getMask(r),
        greedy: !1,
        placeholder: "",
        numericInput: !0
    }), $("[name=payment]").val(o + " ₽"), $("[name=procent]").val(t + " ₽"), $("[name=sum]").val(r + " ₽"), $("[name=sumcr],[name=sum-f]").val(r + " ₽")
}

function getStv(e) {
    var a, t, r, o = parseFloat($("#calc_sum_range").val()),
        n = parseFloat($("#calc_term_range").val());
    return e && (n < 13 ? t = 3.3 : 13 <= n && n < 24 ? t = 2.5 : 24 <= n && (t = 2)), o < 1e5 ? r = 3.3 : 1e5 <= o && o < 5e5 ? r = 3 : 5e5 <= o && o < 1e6 ? r = 2.5 : 1e6 <= o && (r = 2), a = r < t ? r : t, $("#calc_rate_range").val(a), $(".form-stv ").html(a), a
}

function showShedule() {
    var e = parseFloat($("#calc_sum_range").val()),
        a = parseInt($("#calc_term_range").val()),
        t = $("#calc_rate_range").val(),
        r = parseFloat(t / 100),
        o = $("#calc_payment_type").val();
    if ("1" == o) var n = e * (r + r / (Math.pow(1 + r, a) - 1)),
        i = "График платежей";
    else if ("1" == o) n = e * r, i = "График платежей";
    else if ("3" == o) n = e * r, i = "График выплат";
    else if ("4" == o) n = 0, i = "График выплат";
    else if ("5" == o) n = 0, i = "График выплат";
    var l = '<div class="col-sm-12"><div class="section-header text-left"><h3>' + i + "</h3>";
    if (l += '<div class="par-parametr grafik-parametr"><span class="sum-v">' + addSpaces(e) + ' ₽</span> <span class="input-label ">cумма займа</span></div>', l += '<div class="par-parametr grafik-parametr"><span class="sum-v">' + a + ' мес</span> <span class="input-label ">срок займа</span></div>', l += '<div class="par-parametr grafik-parametr"><span class="sum-v">' + t + ' в мес</span> <span class="input-label ">ставка</span></div>', o <= 2) {
        l += '</div></div><div class="col-sm-12"><table class="calc-shedule"><tr class="calc-shedule-header"><th>№</th><th>Платеж в месяц</th><th>Платеж по процентам</th><th>Платеж по основному долгу</th><th>Остаток основного долга</th></tr>';
        for (var s = e, c = 0, d = 0, u = 0, p = 0, f = n, m = e * r, h = 1; h <= a; h++)
            if (s - (d = f - (c = s * r)) < 0 && (f = (d = s - 0) + (c - 0)), s -= d, h == a) {
                f = 1 * f + 1 * s;
                var v = d = 1 * d + 1 * s
            }
        s = e;
        for (h = 1; h <= a; h++) s - (d = n - (c = s * r)) < 0 && (n = (d = s - 0) + (c - 0)), s -= d, h == a && (n = 1 * n + 1 * s, d = 1 * d + 1 * s, s = 0), u += 1 * n, p += 1 * c, l += "<tr><td>" + h + ".</td>", l += "<td>" + addSpaces(n.toFixed(2)) + " ₽</td>", l += '<td><div style="background:#EEF3F9;width:' + (100 * c / Math.max(v, m)).toFixed(2) + '%;height:41px;float:right;"></div><div style="padding:7px;">' + addSpaces(c.toFixed(2)) + " ₽</div></td>", l += '<td><div style="background:#D7F8D8;width:' + (100 * d / Math.max(v, m)).toFixed(2) + '%;height:41px;float:left;margin-right:-100%;"></div><div style="padding:7px;">' + addSpaces(d.toFixed(2)) + " ₽</div></td>", l += '<td><div style="background:#FFE9E9;width:' + (100 * s / e).toFixed(2) + '%;height:41px;float:left;margin-right:-100%;"></div><div style="padding:7px;">' + addSpaces(s.toFixed(2)) + " ₽</div></td></tr>";
        l += '<tr class="calc-shedule-results"><td>Итого:</td>', l += "<td>" + addSpaces(u.toFixed(2)) + " ₽</td>", l += "<td>" + addSpaces(p.toFixed(2)) + " ₽</td>", l += "<td>" + addSpaces(e.toFixed(2)) + " ₽</td>", l += "<td></td></tr>", l += "</table></div>"
    } else {
        l += '</div></div><div class="col-sm-12"><table class="calc-shedule"><tr class="calc-shedule-header"><th>№</th><th>Начислено процентов, ₽</th><th>Выплата, ₽</th><th>Нарастающий доход, ₽</th><th>Сумма вклада, ₽</th></tr>';
        s = e;
        var g = 0,
            F = 0,
            _ = (n = 0, 0);
        u = 0;
        if ("5" == o) var x = (b = e * Math.pow(1 + r, a)) - e;
        else var b = e + (x = e * r * a);
        for (h = 1; h <= a; h++) "3" == o ? (g += n = F = s * r, s = s + F - n, h == a && (n += s)) : "4" == o ? h == a && (n = (F = s * r * a) + s, g = F) : "5" == o && (g += F = s * r, s = s + F - n, h == a && (n += s)), _ += F, u += n, l += "<tr><td>" + h + ".</td>", l += "<td>" + addSpaces(F.toFixed(2)) + "</td>", l += "<td>" + addSpaces(n.toFixed(2)) + "</td>", l += '<td><div style="background:#D7F8D8;width:' + (100 * g / x).toFixed(2) + '%;height:41px;float:left;margin-right:-100%;"></div><div style="padding:7px;">' + addSpaces(g.toFixed(2)) + "</div></td>", l += '<td><div style="background:#ffc0cb;width:' + (100 * s / b).toFixed(2) + '%;height:41px;float:left;margin-right:-100%;"></div><div style="padding:7px;">' + addSpaces(s.toFixed(2)) + "</div></td></tr>";
        l += '<tr class="calc-shedule-results"><td>Итого:</td>', l += "<td>" + addSpaces(_.toFixed(2)) + " ₽</td>", l += "<td>" + addSpaces(u.toFixed(2)) + " ₽</td>", l += "<td>" + addSpaces(g.toFixed(2)) + " ₽</td>", l += "<td>" + addSpaces(s.toFixed(2)) + "</td>", l += "</tr>", l += "</table></div>"
    }
    showModal(l)
}

function showTermCompare() {
    var e = parseFloat($("#calc_sum_range").val()),
        a = $("#calc_rate_range").val(),
        t = parseFloat(a / 1200),
        r = $("#calc_payment_type").val(),
        o = '<div class="col-sm-12"><div class="section-header text-left"><h2><span class="fa fa-pie-chart"></span> Сравнение платежей для разных сроков</h2><h4>';
    o += "Сумма: <strong>" + addSpaces(e) + " ₽</strong>. ", o += "Ставка: <strong>" + a + "% годовых</strong>.", o += '</h4><p><a href="#" onclick="showShedule(); return false;"><span class="fa fa-th-list"></span> График платежей...</a></p></div></div>', o += '<div class="col-sm-12"><table class="calc-shedule"><tr class="calc-shedule-header"><th>№</th><th>Срок, месяцев</th><th>Ежемесячный платеж, ₽</th><th>Сумма к выплате, ₽</th><th>Переплата процентов, ₽</th></tr>';
    var n = 0,
        i = 0,
        l = 0,
        s = Math.floor($("#calc_term_range").attr("max") / 12);
    if ("1" == r) var c = (e * (t + t / (Math.pow(1 + t, 12) - 1))).toFixed(2),
        d = 12 * (e * (t + t / (Math.pow(1 + t, 12 * s) - 1))).toFixed(2) * s - e;
    else "2" == r && (d = 12 * (c = (e * t).toFixed(2)) * s);
    for (var u = 1; u <= s; u++) term = 12 * u, "1" == r ? l = (i = (n = (e * (t + t / (Math.pow(1 + t, term) - 1))).toFixed(2)) * term) - e : "2" == r && (i = (l = (n = (e * t).toFixed(2)) * term) + e), o += "<tr><td>" + u + ".</td>", o += "<td>" + term + (term < 100 ? "&nbsp;&nbsp;" : "&nbsp;") + ' <a href="#" onclick="$(\'#calc_term_range\').val(' + term + ').change();showShedule();return false;">график <span class="fa fa-carret-right"></span></a></td>', o += '<td><div style="background:#ffc0cb;width:' + (100 * n / c).toFixed(2) + '%;height:41px;float:left;margin-right:-100%;"></div><div style="padding:7px;">' + addSpaces(n) + "</div></td>", o += "<td>" + addSpaces(i.toFixed(2)) + "</td>", o += '<td><div style="background:#EEF3F9;width:' + (100 * l / d).toFixed(2) + '%;height:41px;float:left;margin-right:-100%;"></div><div style="padding:7px;">' + addSpaces(l.toFixed(2)) + "</div></td></tr>";
    showModal(o += "</table></div>")
}

function showCallbackForm() {
    showModal('<div class="col-sm-12"><div class="section-header text-center"><h2>Оставьте номер, и мы Вам перезвоним!</h2></div></div><div class="col-sm-12"><form method="post" class="form callback-form"><div class="col-md-6 col-sm-6"> <input name="telephone" class="form-telephone" type="tel" placeholder="Телефон" required=""></div><div class="col-md-6 col-sm-6"> <button type="submit" class="form-button"><span class="fa fa-phone"></span> <span class="form-button-text">Позвоните мне!</span></button></div><p class="form-notification" style="display:none;line-height:normal;padding:10px 10px;font-size:2.4rem;"> Дело сделано! Заварите себе чашечку чая, пока менеджер набирает ваш номер телефона... :)</p></form></div>', 700), $(".callback-form").submit(function(e) {
        var a = $(this);
        e.preventDefault();
        var t = $(".form-telephone", a).val(),
            r = !0;
        if (isValidPhone(t = t || "") ? $("input.form-telephone", a).removeClass("not-valid") : (r = !1, $("input.form-telephone", a).addClass("not-valid")), r) {
            var o = {};
            o.phone = t, o.city = mainCity || "", o.url = document.location.href, o.referrer = $.cookie("first_referrer"), o.utm_source = $.cookie("utm_source"), o.utm_medium = $.cookie("utm_medium"), o.utm_campaign = $.cookie("utm_campaign"), o.utm_content = $.cookie("utm_content"), o.utm_term = $.cookie("utm_term"), $.ajax({
                type: "POST",
                url: "https://app.creditors24.com/front/site/callback",
                data: o,
                beforeSend: function() {
                    var e = $("button.form-button", a);
                    $(".fa.fa-phone", e).addClass("fa-spinner fa-spin").removeClass("fa-phone"), $(".form-button-text", e).html("Отправка..."), e.prop("disabled", !0)
                },
                success: function() {
                    trackGoal("CBK_CALL"), $(".form-notification", a).fadeIn(500);
                    var e = $("button.form-button", a);
                    $(".fa.fa-spinner", e).addClass("fa-check").removeClass("fa-spinner fa-spin"), $(".form-button-text", e).html("Отправлено!")
                },
                error: function() {
                    var e = $("button.form-button", a);
                    $(".fa.fa-spinner", e).addClass("fa-phone").removeClass("fa-spinner fa-spin"), $(".form-button-text", e).html("Позвоните мне!"), e.prop("disabled", !1), alert("При отправке возникла ошибка. Попробуйте еще раз.")
                }
            })
        }
        return !1
    })
}

function initCallbackButton() {
    $(document.body).append('<a href="#" id="callback__toggle"><div class="circlephone" style="transform-origin: center;"></div><div class="circle-fill" style="transform-origin: center;"></div><div class="img-circle" style="transform-origin: center;"><div class="img-circleblock" style="transform-origin: center;"></div></div></a>'), $("#callback__toggle, .callback-btn, .callback-link").click(function(e) {
        e.preventDefault(), showCallbackForm()
    })
}
saveSource(),
    function(u) {
        "use strict";
        u("#office_address").text();
        var o = {
            Launch: function() {
                o.MenuSticky(), o.MainSlider(), o.MainSliderAlign(), o.Navigation(), o.Carousel(), o.Slider(), o.RegisterForm(), o.ClientbaseForm(), o.AppForm(), o.SubscribeForm(), o.FakeForm(), o.Apps()
            },
            MenuSticky: function() {
                var e = document.querySelector("#menu");
                if (e) var a = e.offsetTop + 100;
                document.onscroll = function() {
                    u(window).scrollTop() >= a ? (u("#menu").addClass("sticky"), u("#menu").removeClass("fixed")) : (u("#menu").removeClass("sticky"), u("#menu").addClass("fixed"))
                }
            },
            MainSliderAlign: function() {
                var e, a, t = u(".header-bg");

                function r() {
                    e = t.find("img").width(), a = e / 2, t.find("img").css("margin-left", -a)
                }
                r(), u(window).on("load resize", r)
            },
            MainSlider: function() {
                u(".main-slider").flexslider({
                    noCSS: !0,
                    touch: !1,
                    controlNav: !1,
                    directionNav: !1,
                    animation: "fade",
                    start: function() {
                        u("#preloader").addClass("ready")
                    }
                })
            },
            Navigation: function() {
                u("#menu-ul").onePageNav({
                    currentClass: "current",
                    scrollSpeed: 500,
                    scrollOffset: 60,
                    scrollThreshold: .2,
                    begin: function() {
                        u(".navbar-toggle").hasClass("collapsed") || u(".navbar-toggle").click()
                    },
                    easing: "swing"
                })
            },
            Carousel: function() {
                var e = u("#carousel");
                e.owlCarousel({
                    itemsCustom: [
                        [1200, 4],
                        [970, 3],
                        [500, 2],
                        [300, 1]
                    ],
                    navigation: !1
                }), u("#object_types .next").click(function() {
                    e.trigger("owl.next")
                }), u("#object_types .prev").click(function() {
                    e.trigger("owl.prev")
                });
                var a = u("#carousel2");
                a.owlCarousel({
                    itemsCustom: [
                        [1200, 4],
                        [970, 3],
                        [500, 2],
                        [300, 1]
                    ],
                    navigation: !1
                }), u("#see_also .next").click(function() {
                    a.trigger("owl.next")
                }), u("#see_also .prev").click(function() {
                    a.trigger("owl.prev")
                });
                var t = u("#carousel3");
                t.owlCarousel({
                    itemsCustom: [
                        [1200, 3],
                        [970, 3],
                        [600, 2],
                        [300, 1]
                    ],
                    navigation: !1
                }), u("#offers .next").click(function() {
                    t.trigger("owl.next")
                }), u("#offers .prev").click(function() {
                    t.trigger("owl.prev")
                });
                var r = u("#carousel-p");
                r.owlCarousel({
                    itemsCustom: [
                        [1200, 5],
                        [970, 4],
                        [500, 2],
                        [300, 1]
                    ],
                    navigation: !1
                }), u("#partners .next").click(function() {
                    r.trigger("owl.next")
                }), u("#partners .prev").click(function() {
                    r.trigger("owl.prev")
                })
            },
            Slider: function() {
                u(".flexslider").flexslider({
                    noCSS: !0,
                    touch: !1,
                    directionNav: !1,
                    animation: "fade"
                })
            },
            ClientbaseForm: function() {
                u(".clientbase-form").submit(function(e) {
                    var t = u(this);
                    e.preventDefault();
                    var a = u(".form-name", t).val(),
                        r = u(".form-telephone", t).val(),
                        o = u(".form-email", t).val(),
                        n = u(".form-sum", t).val(),
                        i = u(".form-ticket", t).val();
                    a = a || "", o = o || "", i = i || "";
                    var l = !0;
                    if (isValidPhone(r = r || "") ? u("input.form-telephone", t).removeClass("not-valid") : (l = !1, u("input.form-telephone", t).addClass("not-valid")), !o || isValidEmail(o) ? u("input.form-email", t).removeClass("not-valid") : (l = !1, u("input.form-email", t).addClass("not-valid")), 1 == u(".form-birth", t).length) {
                        var s = u(".form-birth", t);
                        !(c = s.val()) && !s.attr("required") || /(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[012])\.(19|20)\d\d/.test(c) ? s.removeClass("not-valid") : (l = !1, s.addClass("not-valid"), alert("Формат даты рождения должен быть ДД.ММ.ГГГГ"))
                    } else var c = "";
                    if (l) {
                        var d = {};
                        d.city = mainCity || "", d.phone = r, d.email = o, d.name = a, d.sum = n, d.zalog = i, d.birth = c, d.url = document.location.href, d.referrer = u.cookie("first_referrer"), d.utm_source = u.cookie("utm_source"), d.utm_medium = u.cookie("utm_medium"), d.utm_campaign = u.cookie("utm_campaign"), d.utm_content = u.cookie("utm_content"), d.utm_term = u.cookie("utm_term"), u.ajax({
                            type: "POST",
                            url: "https://kreditor.clientbase.ru/add.php?from=site",
                            data: d,
                            dataType: "json",
                            jsonp: !1,
                            beforeSend: function() {
                                var e = u("button.form-button", t);
                                u(".fa.fa-sign-in", e).addClass("fa-spinner fa-spin").removeClass("fa-sign-in"), u(".form-button-text", e).html("Отправка..."), e.prop("disabled", !0), 0 < u("#profile").length && initProfileForm(1)
                            },
                            success: function(e) {
                                0 < u("#profile").length && (u.cookie("lead_hash", e.lead_hash, {
                                    expires: 1,
                                    path: "/"
                                }), u.cookie("lead_step", "1", {
                                    expires: 1,
                                    path: "/"
                                })), trackGoal("ORDER");
                                var a = u("button.form-button", t);
                                u(".fa.fa-spinner", a).addClass("fa-check").removeClass("fa-spinner fa-spin"), u(".form-button-text", a).html("Отправлено!"), u(".form-notification", t).show(), u(".form-notification .form-button", t).click()
                            },
                            error: function() {
                                var e = u("button.form-button", t);
                                u(".fa.fa-spinner", e).addClass("fa-sign-in").removeClass("fa-spinner fa-spin"), u(".form-button-text", e).html("Отправить"), e.prop("disabled", !1), alert("При отправке возникла ошибка. Попробуйте еще раз.")
                            }
                        })
                    }
                    return !1
                })
            },
            AppForm: function() {
                u(".app-form").submit(function(e) {
                    var t = u(this);
                    e.preventDefault();
                    var a = u(".form-name", t).val(),
                        r = u(".form-telephone", t).val(),
                        o = u(".form-email", t).val(),
                        n = u(".form-sum", t).val(),
                        i = u(".form-ticket", t).val();
                    a = a || "", o = o || "", i = i || "";
                    var l = !0;
                    if (isValidPhone(r = r || "") ? u("input.form-telephone", t).removeClass("not-valid") : (l = !1, u("input.form-telephone", t).addClass("not-valid")), !o || isValidEmail(o) ? u("input.form-email", t).removeClass("not-valid") : (l = !1, u("input.form-email", t).addClass("not-valid")), 1 == u(".form-birth", t).length) {
                        var s = u(".form-birth", t);
                        !(c = s.val()) && !s.attr("required") || /(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[012])\.(19|20)\d\d/.test(c) ? s.removeClass("not-valid") : (l = !1, s.addClass("not-valid"), alert("Формат даты рождения должен быть ДД.ММ.ГГГГ"))
                    } else var c = "";
                    if (l) {
                        var d = {};
                        d.city = mainCity || "", d.phone = r, d.email = o, d.name = a, d.sum = n, d.zalog = i, d.birth = c, d.url = document.location.href, d.referrer = u.cookie("first_referrer"), d.utm_source = u.cookie("utm_source"), d.utm_medium = u.cookie("utm_medium"), d.utm_campaign = u.cookie("utm_campaign"), d.utm_content = u.cookie("utm_content"), d.utm_term = u.cookie("utm_term"), u.ajax({
                            type: "POST",
                            url: "https://app.creditors24.com/front/site/lead",
                            data: d,
                            dataType: "json",
                            jsonp: !1,
                            beforeSend: function() {
                                var e = u("button.form-button", t);
                                u(".fa.fa-sign-in", e).addClass("fa-spinner fa-spin").removeClass("fa-sign-in"), u(".form-button-text", e).html("Отправка..."), e.prop("disabled", !0), 0 < u("#profile").length && initProfileForm(1)
                            },
                            success: function(e) {
                                0 < u("#profile").length && (u.cookie("lead_hash", e.lead_hash, {
                                    expires: 1,
                                    path: "/"
                                }), u.cookie("lead_step", "1", {
                                    expires: 1,
                                    path: "/"
                                })), trackGoal("ORDER");
                                var a = u("button.form-button", t);
                                u(".fa.fa-spinner", a).addClass("fa-check").removeClass("fa-spinner fa-spin"), u(".form-button-text", a).html("Отправлено!"), u(".form-notification", t).show(), u(".form-notification .form-button", t).click()
                            },
                            error: function() {
                                var e = u("button.form-button", t);
                                u(".fa.fa-spinner", e).addClass("fa-sign-in").removeClass("fa-spinner fa-spin"), u(".form-button-text", e).html("Отправить"), e.prop("disabled", !1), alert("При отправке возникла ошибка. Попробуйте еще раз.")
                            }
                        })
                    }
                    return !1
                })
            },
            RegisterForm: function() {
                u(".register-form").submit(function(e) {
                    var a = u(this);
                    e.preventDefault();
                    var t = u(".form-name", a).val(),
                        r = u(".form-telephone", a).val(),
                        o = u(".form-email", a).val(),
                        n = u(".form-sum", a).val(),
                        i = u(".form-ticket", a).val();
                    t = t || "", o = o || "", i = i || "";
                    var l = !0;
                    if (isValidPhone(r = r || "") ? u("input.form-telephone", a).removeClass("not-valid") : (l = !1, u("input.form-telephone", a).addClass("not-valid")), !o || isValidEmail(o) ? u("input.form-email", a).removeClass("not-valid") : (l = !1, u("input.form-email", a).addClass("not-valid")), l) {
                        var s = {};
                        s.name = t, s.telephone = r, s.email = o, s.sum = n, s.ticket = i, s.city = mainCity || "", s.url = document.location.href, u.ajax({
                            type: "POST",
                            url: "/php/process.php",
                            data: s,
                            beforeSend: function() {
                                var e = u("button.form-button", a);
                                u(".fa.fa-sign-in", e).addClass("fa-spinner fa-spin").removeClass("fa-sign-in"), u(".form-button-text", e).html("Отправка..."), e.prop("disabled", !0)
                            },
                            success: function() {
                                trackGoal("ORDER"), u(".form-notification", a).fadeIn(500);
                                var e = u("button.form-button", a);
                                u(".fa.fa-spinner", e).addClass("fa-check").removeClass("fa-spinner fa-spin"), u(".form-button-text", e).html("Отправлено!")
                            },
                            error: function() {
                                var e = u("button.form-button", a);
                                u(".fa.fa-spinner", e).addClass("fa-sign-in").removeClass("fa-spinner fa-spin"), u(".form-button-text", e).html("Отправить"), e.prop("disabled", !1), alert("При отправке возникла ошибка. Попробуйте еще раз.")
                            }
                        })
                    }
                    return !1
                })
            },
            FakeForm: function() {
                u(".fake-form").submit(function(e) {
                    var a = u(this);
                    e.preventDefault();
                    var t = u(".form-name", a).val(),
                        r = u(".form-telephone", a).val(),
                        o = u(".form-email", a).val(),
                        n = u(".form-sum", a).val(),
                        i = u(".form-ticket", a).val();
                    t = t || "", o = o || "", i = i || "";
                    var l = !0;
                    if (isValidPhone(r = r || "") ? u("input.form-telephone", a).removeClass("not-valid") : (l = !1, u("input.form-telephone", a).addClass("not-valid")), !o || isValidEmail(o) ? u("input.form-email", a).removeClass("not-valid") : (l = !1, u("input.form-email", a).addClass("not-valid")), l) {
                        var s = {};
                        s.name = t, s.telephone = r, s.email = o, s.sum = n, s.ticket = i, s.city = mainCity || "", s.url = document.location.href, u.ajax({
                            type: "POST",
                            url: "/php/process.php",
                            data: s,
                            beforeSend: function() {
                                var e = u("button.form-button", a);
                                u(".fa.fa-sign-in", e).addClass("fa-spinner fa-spin").removeClass("fa-sign-in"), u(".form-button-text", e).html("Отправка..."), e.prop("disabled", !0)
                            },
                            success: function() {
                                trackGoal("FAKE-ORDER"), u(".form-notification", a).fadeIn(500);
                                var e = u("button.form-button", a);
                                u(".fa.fa-spinner", e).addClass("fa-check").removeClass("fa-spinner fa-spin"), u(".form-button-text", e).html("Отправлено!"), alert(u("#disclaimer").text().trim())
                            },
                            error: function() {
                                var e = u("button.form-button", a);
                                u(".fa.fa-spinner", e).addClass("fa-sign-in").removeClass("fa-spinner fa-spin"), u(".form-button-text", e).html("Отправить"), e.prop("disabled", !1), alert("При отправке возникла ошибка. Попробуйте еще раз.")
                            }
                        })
                    }
                    return !1
                })
            },
            SubscribeForm: function() {
                u("#subscribe-form").submit(function(e) {
                    e.preventDefault();
                    var a, t = u("#subscriber").val(),
                        r = "&subscriber=" + t;
                    return a = t, new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a) ? u.ajax({
                        type: "POST",
                        url: "php/process.php",
                        data: r,
                        success: function() {
                            u("#subscribe-form .form-notification").fadeIn(500)
                        }
                    }) : u("input#subscriber").addClass("not-valid"), !1
                })
            },
            Apps: function() {
                u(".accordion-group").accordion(), u("#gotop").click(function() {
                    u("html, body").scrollTo(u("#header"), 300)
                }), u(".goregister").click(function() {
                    u("html, body").scrollTo(u("#register"), 300)
                }), u("#mce-EMAIL").attr("placeholder", "Your email..."), u("input, textarea").placeholder(), u(".video").fitVids(), u(".form-ticket").fancySelect()
            }
        };
        u(document).ready(function() {
            var e = u("[name=def-page]").val(),
                a = 0;
            a = "truck" == e || "special" == e ? 15 : "moto" == e ? 5 : "legal" == e ? 30 : 15, u("#calc_sum_range").attr("max", 1e6 * a), u("#calc_sum").siblings(".under-input-wrapper").find(".under-input-2").html("до " + a + " 000 000 ₽"), u(".max-sum").html(a + " 000 000 ₽"), u(function() {
                u("body").width() < 768 && (u(".li-main-1").html('<div class="li-pre"></div>100% одобрение'), u(".li-main-2").html('<div class="li-pre"></div>Сумма от 30 000 до <span class="max-sum">' + a + " млн. ₽</span>"), u(".li-main-3").html('<div class="li-pre"></div>Срок от 1 месяца до 3 лет'))
            }), u(".mob-menu-but-h-3").click(function() {
                u(".modal-wrapper").fadeToggle(500), u("html").css("overflow-y", "scroll")
            }), checkVideoAutoPlay(), u("a.city").click(function(e) {
                e.preventDefault(), showModal(u("#city_select").html())
            }), u(".show-video").click(function(e) {
                e.preventDefault(), showVideo(this)
            }), u("#modal_close, #overlay").click(function() {
                u("#modal_form").animate({
                    opacity: 0,
                    top: "5px"
                }, 200, function() {
                    u(this).css("display", "none"), u(".modal-clear").remove(), u("#overlay").fadeOut(400)
                })
            }), u(window).on("resize", resizeModal), u.cookie("city-selected") ? u(".city-select").hide() : u(".city-select").show(), u(".city-select .btn").click(function() {
                u.cookie("city-selected", "1", {
                    path: "/"
                }), u(".city-select").hide()
            }), u(".form-notification .form-button.show-profile").click(function() {
                u("#profile").fadeIn(500), u("#register").hide(), u("html, body").scrollTo(u("#profile").offset().top - 100, 500), trackGoal("PROFILE-STEP1")
            });
            var t = getUrlVars();

            function r(e) {
                var a, t, r = ("" + e).split(".")[0],
                    o = ("" + e).split(".")[1];
                return null != o ? 0 < procent && o < 10 ? t = ".9{1} ₽" : 9 < o && (t = ".9{2} ₽") : t = " ₽", null != r && (r < 1e3 ? a = "9{1,3}" : 999 < r && r < 1e6 ? a = "9{1,3} 9{1,3}" : 999999 < r && r < 1e9 && (a = "9{1,3} 9{1,3} 9{1,3}")), a + t
            }
            t.lh && u.cookie("lead_hash", t.lh, {
                expires: 1,
                path: "/"
            }), u.cookie("lead_hash") && 0 < u("#profile").length && (initProfileForm(1), u("#profile").fadeIn(500), u("#register").hide()), o.Launch(), u("#sumcr").inputmask({
                mask: "9{0,3} 9{0,3} 9{0,3} ₽",
                greedy: !1,
                placeholder: "",
                numericInput: !0
            }), u("#calc_overpayment,#calc_payments_sum,#calc_payment").change(function() {
                var e = u(this),
                    a = e.val();
                e.inputmask({
                    mask: r(a),
                    greedy: !1,
                    placeholder: "",
                    numericInput: !0
                })
            })
        })
    }(jQuery), $(document).ready(function() {
        if (isIE()) var e = "change",
            a = "keyup";
        else e = "input change", a = "input change";
        $("#calc_price_range").on(e, calcPriceRangeInput), $("#calc_fee_range").on(e, calcFeeRangeInput), $("#calc_sum_range").on(e, calcSumRangeInput), $("#calc_term_range").on(e, calcTermRangeInput), $("#calc_rate_range").on(e, calcRateRangeInput), $("#calc_payment_range").on(e, calcPaymentRangeInput), $("#calc_payment_type").change(function() {
            calcResult()
        }), $("#calc_price").change(function() {
            calcPriceRangeInput()
        }), $("#calc_fee").change(function() {
            calcFeeRangeInput()
        }), $("#calc_sum").change(function() {
            calcSumRangeInput()
        }), $("#calc_term").change(function() {
            calcTermRangeInput()
        }), $("#calc_rate").change(function() {
            calcRateRangeInput()
        }), $("#calc_payment").change(function() {
            var e = $(this).val().replace(/[^\d]/g, "");
            $("#calc_payment_range").val(e), calcPaymentRangeInput()
        }), $("#calc_price").on(a, function() {
            var e = $(this).val().replace(/[^\d]/g, "");
            $("#calc_price_range").val(e), calcSumFromPriceAndFee()
        }), $("#calc_fee").on(a, function() {
            var e = $(this).val().replace(/[^\d]/g, "");
            $("#calc_fee_range").val(e), calcSumFromPriceAndFee()
        }), $("#calc_sum").on(a, function() {
            var e = $(this).val().replace(/[^\d]/g, "");
            $("#calc_sum_range").val(e), calcResult()
        }), $("#calc_term").on(a, function() {
            var e = $(this).val().replace(/[^\d]/g, "");
            $("#calc_term_range").val(e), calcResult()
        }), $("#calc_rate").on(a, function() {
            var e = $(this).val().replace(/[^\d\.\,]/g, "").replace(/\,/g, ".");
            $("#calc_rate_range").val(e), calcResult()
        }), $(".file-text-graf").click(function(e) {
            e.preventDefault(), $("html").css("overflow-y", "hidden"), showShedule()
        }), $(".calc-term-compare-show").click(function(e) {
            e.preventDefault(), showTermCompare()
        }), $(".calc-preset").click(function() {
            var e = $(this).data("rate-min"),
                a = $(this).data("rate-max"),
                t = $(this).data("rate-step"),
                r = $(this).data("term-min"),
                o = $(this).data("term-max"),
                n = $(this).data("sum-min"),
                i = $(this).data("sum-max"),
                l = $(this).data("min-fee");
            $("#calc_rate_range").attr("min", e), $("#calc_rate_range").attr("max", a), $("#calc_rate_range").attr("step", t), $("#min_rate").html("от " + e + "% годовых"), $("#max_rate").html("до " + a + "% годовых"), $("#calc_term_range").attr("min", r), $("#calc_term_range").attr("max", o), $("#min_term").html("от " + r + " месяцев"), $("#max_term").html("до " + o + " месяцев"), $("#calc_sum_range").attr("min", n), $("#min_sum").html("от " + addSpaces(n) + " ₽"), $("#calc_price_range").attr("min", n), $("#calc_price_range").attr("max", i), $("#min_price").html("от " + addSpaces(n) + " ₽"), $("#max_price").html("от " + addSpaces(i) + " ₽"), $("#calc_min_fee").val(l), calcRateRangeInput(), calcTermRangeInput(), calcPriceRangeInput(), calcSumRangeInput(), calcResult(), $("html, body").scrollTo($("#calculator"), 300)
        }), $("#sumcr").on("keyup change", function() {
            var e = $(this).val(),
                a = e.replace(/[^-0-9]/gim, "");
            e = addSpaces(e.replace(/[^-0-9]/gim, "") + " ₽"), $(this).val(e);
            var t = 0;
            a < 1e5 ? t = 3.3 : 1e5 <= a && a < 5e5 ? t = 3 : 5e5 <= a && a < 1e6 ? t = 2.5 : 1e6 <= a && (t = 2), $("#calc_rate_range").val(t), $(".form-stv ").html(t), $("[name=calc_sum]").val(e)
        }), $("#sum-f").on("keyup change", function() {
            var e = $(this).val(),
                a = e.replace(/[^-0-9]/gim, "");
            e = addSpaces(e.replace(/[^-0-9]/gim, "") + " ₽"), $(this).val(e);
            var t = 0;
            a < 1e5 ? t = 3.3 : 1e5 <= a && a < 5e5 ? t = 3 : 5e5 <= a && a < 1e6 ? t = 2.5 : 1e6 <= a && (t = 2), $("#calc_rate_range").val(t), $(".form-stv ").html(t), $("[name=calc_sum],#sumcr").val(e)
        }), calcResult()
    });
